<div class="reg-shell" [formGroup]="form">
  <div class="reg-card">
    <!-- Toggle Cliente / Nutriólogo -->
    <div class="type-switch">
      <button type="button"
              class="type-btn"
              [class.active]="isCliente"
              (click)="setTipo('cliente')">
        Cliente
      </button>
      <button type="button"
              class="type-btn"
              [class.active]="isNutriologo"
              (click)="setTipo('nutriologo')">
        Nutriólogo
      </button>
    </div>

    <h1 class="title">Registro de usuario</h1>

    <!-- Comunes -->
    <div class="field">
      <label>Nombre</label>
      <input class="input" type="text" formControlName="nombre" placeholder="Tu nombre" />
    </div>

    <div class="field">
      <label>Correo electrónico</label>
      <input class="input" type="email" formControlName="correo" placeholder="tucorreo@email.com" />
    </div>

    <div class="field">
      <label>Contraseña</label>
      <input class="input" type="password" formControlName="contrasena" placeholder="Mínimo 8 caracteres" />
    </div>

    <!-- Cliente -->
    <ng-container *ngIf="isCliente">
      <!-- Fila de 3 columnas con espacio -->
      <div class="row-3">
        <div class="field">
          <label>Edad</label>
          <input class="input" type="number" formControlName="edad" placeholder="Ej: 25" />
        </div>
        <div class="field">
          <label>Peso (kg)</label>
          <input class="input" type="number" step="0.1" formControlName="peso" placeholder="Ej: 60.5" />
        </div>
        <div class="field">
          <label>Altura (m)</label>
          <input class="input" type="number" step="0.01" formControlName="altura" placeholder="Ej: 1.68" />
        </div>
      </div>

      <div class="field">
        <label>Objetivo</label>
        <select class="input select-caret" formControlName="objetivo">
          <option value="" disabled selected>Selecciona un objetivo</option>
          <option *ngFor="let o of objetivos" [value]="o.value">{{ o.label }}</option>
        </select>
      </div>
    </ng-container>

    <!-- Nutriólogo -->
    <ng-container *ngIf="isNutriologo">
      <div class="field">
        <label>Profesión</label>
        <input class="input" type="text" formControlName="profesion" placeholder="Ej: Lic. en Nutrición" />
      </div>

      <div class="field">
        <label>Número de cédula</label>
        <input class="input" type="text" formControlName="numero_cedula" placeholder="Ej: 12345678" />
      </div>
    </ng-container>

    <!-- Mensaje de error -->
    <div class="error" *ngIf="errorMsg">{{ errorMsg }}</div>

    <!-- Botón -->
    <button class="btn-primary"
            type="button"
            [disabled]="cargando || form.invalid"
            (click)="submit()">
      {{ cargando ? 'Registrando…' : 'Registrar' }}
    </button>

    <p class="hint" *ngIf="form.invalid && !cargando">Completa todos los campos correctamente.</p>
  </div>
</div>
